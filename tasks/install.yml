---

- name: Include vars
  # yamllint disable-line rule:line-length
  include_vars: "{{ ansible_os_family }}{{ ansible_distribution_major_version }}.yml"

- name: Install dependencies
  become: true
  package:
    name: "{{ base_postgres_dependencies }}"
    state: present
  tags:
    - install
    - postgres

- name: Install the postgres yum repo
  when: ansible_os_family == 'RedHat'
  become: true
  yum:
    name: "{{ base_postgres_repo }}"
    state: present
    disable_gpg_check: true
    validate_certs: false
  tags:
    - install
    - postgres

- name: Install postgres packages
  become: true
  package:
    name: "{{ base_postgres_packages }}"
    update_cache: true
    state: present
  tags:
    - install
    - postgres

- name: Install required libraries
  become: true
  pip:
    name: "{{ base_postgres_pips }}"
    state: present
  tags:
    - install
    - postgres
...
